<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplicación Unificada: Generar Acta & Extractor PDF</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<header>
    <h1>Aplicación Unificada</h1>
    <p>Generación de Acta de Instrucción & Extractor de Contenido PDF</p>
</header>

<nav>
    <a href="#" id="tabActa" class="active">Generar Acta</a>
    <a href="#" id="tabPdf">Extractor PDF</a>
</nav>

<main>
    <!-- Sección Acta -->
    <section id="actaSection" class="container">
        <h1>Generar Acta de Instrucción</h1>
        <form id="actaForm">
            <label for="grado">Grado</label>
            <input type="text" id="grado" placeholder="Ej: Capitán" required>
            
            <label for="nombre">Nombre</label>
            <input type="text" id="nombre" placeholder="Nombre completo" required>
            
            <label for="cargo">Cargo</label>
            <input type="text" id="cargo" placeholder="Cargo del funcionario" required>
            
            <label for="tema">Tema de Instrucción</label>
            <input type="text" id="tema" placeholder="Tema" required>
            
            <label for="temas">Temas a tratar</label>
            <textarea id="temas" placeholder="Lista de temas a tratar" required rows="4"></textarea>
            
            <button type="submit">Generar Acta</button>
        </form>

        <div id="actaGenerada" style="display:none;">
            <h1>ACTA DE INSTRUCCIÓN</h1>
            <p>Lugar: ESTACIÓN DE POLICÍA BARRIOS UNIDOS</p>
            <p id="primerParrafo">
                LA INSTRUCCIÓN DIRIGIDA POR PARTE DEL SEÑOR 
                <span id="actaGrado"></span>, 
                <span id="actaCargo"></span>, 
                AL PERSONAL QUE CONFORMA LA ESTACIÓN DE POLICÍA BARRIOS UNIDOS, 
                SOBRE <span id="articuloTema">EL</span> <span id="actaTema"></span>.
            </p>
            <br>
            <h3>ORDEN DEL DÍA</h3>
            <ol>
                <li>Verificación de asistentes</li>
                <li>Lectura del acta anterior</li>
                <li>Verificación de los compromisos</li>
                <li>Temas a tratar</li>
            </ol>
            <br>
            <br>
            <h3>DESARROLLO</h3><br>
            <p>
                Se realiza instrucción al personal adscrito a la Estación de Policía Barrios Unidos 
                por parte del señor <span id="actaGrado2"></span>, <span id="actaCargo2"></span>, 
                a quienes se les socializan los lineamientos sobre 
                <span id="articuloTema2">el</span> <span id="actaTema2"></span>.
            </p>
            <br>
            <br>
            <h3>1. Verificación de asistentes</h3><br>
            <p>
                Se verifica la asistencia del personal adscrito a la unidad y se constata la compatibilidad 
                de los correos electrónicos del personal que integra la Estación de Policía Barrios Unidos. 
                Dejando constancia que la presente acta de instrucción se surtirá presencialmente, por correo 
                electrónico y a través del Sistema de Información Gestor de Documentos Policiales, en virtud 
                a lo dispuesto en el Art. 103 del Código General del Proceso -- Uso de las tecnologías de la 
                información y de las comunicaciones, Ley 527 del 18 de agosto de 1999, Ley 794 del 01 de agosto 
                de 2003 y la Ley 962 del 08 de julio de 2005.
            </p>
            <br>
            <br>
            <h3>2. Lectura del acta anterior</h3><br>
            <p>(NO APLICA)</p>
            <br>
            <br>
            <h3>3. Verificación de los compromisos</h3><br>
            <p>(NO APLICA)</p>
            <br>
            <br>
            <h3>4. Temas a tratar</h3><br>
            <p id="temasTratar"></p>
            <br>
        </div>
    </section>

    <!-- Sección Extractor PDF -->
    <section id="pdfSection" class="container" style="display:none;">
        <h1>Extractor de Contenido PDF Mejorado</h1>
        <div class="input-group">
            <label for="fileInput">Seleccionar archivo PDF o arrastrar y soltar:</label>
            <div id="dropZone" class="drop-zone">
                <p>Arrastra y suelta el archivo PDF aquí o haz clic para seleccionarlo</p>
            </div>
            <input type="file" id="fileInput" accept=".pdf" style="display: none;">
        </div>

        <div id="suggestion"></div>

        <div class="input-group">
            <label for="marginRange">
                Margen sugerido para recorte (píxeles): 
                <span id="rangeValue">150</span>
            </label>
            <input type="range" id="marginRange" value="150" min="0" max="200" step="1">
        </div>

        <!-- Modo de agrupación: 1 hoja o 4 hojas -->
        <div>
            <p style="margin: 10px 0; font-weight: bold;">Elige modo de agrupación:</p>
            <div class="icon-group">
                <!-- Opción 1 página -->
                <label>
                    <input type="radio" name="pagesMode" value="1" checked>
                    <div class="single-box"></div>
                    <span>1 Hoja</span>
                </label>
                <!-- Opción 4 páginas -->
                <label>
                    <input type="radio" name="pagesMode" value="4">
                    <div class="four-boxes">
                        <div class="box"></div>
                        <div class="box"></div>
                        <div class="box"></div>
                        <div class="box"></div>
                    </div>
                    <span>4 Hojas</span>
                </label>
            </div>
        </div>

        <button id="processButton">Procesar PDF</button>

        <div id="output"></div>
        <div id="stats"></div>

        <div class="image-container" id="imageContainer" style="display:none;">
            <div class="image-wrapper">
                <img id="currentImage" alt="Imagen actual extraída del PDF">
            </div>
            <div class="image-navigation">
                <button id="prevButton">Anterior</button>
                <button id="nextButton">Siguiente</button>
            </div>
        </div>
        
        <button id="downloadAll" style="display: none;">Descargar todas las imágenes</button>
    </section>
</main>

<!-- Librerías externas: pdf.js y JSZip -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.9.359/pdf.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
<script>
    // Definición del worker de PDF.js (importante para el funcionamiento)
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.9.359/pdf.worker.min.js';
</script>
<script src="tabs.js"></script>
<script src="acta.js"></script>
<script src="pdf-extractor.js"></script>
</body>
</html>
